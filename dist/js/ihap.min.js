function l(){return function(k){function e(h){if(g[h])return g[h].g;var c=g[h]={g:{},id:h,loaded:!1};k[h].call(c.g,c,c.g,e);c.loaded=!0;return c.g}var g={};e.ka=k;e.B=g;e.P="";return e(0)}([function(k,e,g){function h(a){return a&&a.G?a:{default:a}}Object.defineProperty(e,"__esModule",{value:!0});e.default=void 0;var c=function(){function a(b,f){for(var d=0;d<f.length;d++){var c=f[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(b,c.key,c)}}return function(b,
f,d){f&&a(b.prototype,f);d&&a(b,d);return b}}(),b=g(8),a=h(b),b=g(1),f=h(b),b=g(2),d=h(b),b=g(3),n=h(b),b=g(4),p=h(b);g=g(6);var q=h(g);g=function(){function b(m){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.l=new p.default(m.l);this.audio=new a.default;this.controls=new f.default;this.a=new d.default(m.b);this.j=new n.default;this.A=new q.default;this.u=!1;this.f={i:null,M:!1};this.B()}c(b,[{key:"play",value:function(){var a=this.D().type;"song"==a?this.audio.play():
"youtube_video"==a&&this.f.i.W()}},{key:"pause",value:function(){console.log("this.pause");var a=this.D().type;"song"==a?this.audio.pause():"youtube_video"==a&&(console.log("yt video"),this.f.i&&(console.log("player exists"),this.f.i.va()))}},{key:"skip_next",value:function(){var a=this.a.R();this.K(a);return a}},{key:"skip_prev",value:function(){var a=this.a.S();this.K(a);return a}},{key:"getNextSong",value:function(){return this.a.R()}},{key:"getPreviousSong",value:function(){return this.a.S()}},
{key:"emptyPlaylist",value:function(){this.a.empty();this.audio.empty();this.I();this.o(0)}},{key:"changeSong",value:function(a){void 0!=this.a.b.indexOf(a)&&((this.audio.v||this.f.i&&1==this.f.i.qa())&&this.pause(),this.a.m=this.a.b.indexOf(a),this.A.la(),"song"==a.type?this.audio.ya(a):this.Y()?this.f.i.sa(a.T()):this.ta(),this.audio.pause(),this.I(),this.o(0),this.audio.v&&this.audio.play())}},{key:"setPlaylist",value:function(a){this.ma();this.ja(a);return this.L()}},{key:"getPlaylist",value:function(){return this.a.b}},
{key:"appendToPlaylist",value:function(a){this.a.ia(a);this.H();return this.L()}},{key:"prependToPlaylist",value:function(a){this.a.wa(a);this.H();return this.L()}},{key:"getCurrentSong",value:function(){return this.a.b[this.a.m]}},{key:"getCurrentSongIndex",value:function(){return this.a.m}},{key:"removeFromPlaylist",value:function(a){this.a.xa(a);return this.a.b}},{key:"_initializeihap",value:function(){if(void 0==this.l.h)throw'Cannot find container "'+this.l.h+'". Please make sure self an element with this id is present.';
this.da();this.ba();this.H()}},{key:"_createComponents",value:function(){this.l.h.appendChild(this.audio.c);this.l.h.appendChild(this.controls.c);this.l.h.appendChild(this.j.c);this.l.h.appendChild(this.A.c);void 0!=this.l.a.h&&this.l.a.h.appendChild(this.a.c)}},{key:"_resetProgressBar",value:function(){var a=this.audio.element.duration;void 0==a?this.j.reset(0):this.j.reset(a)}},{key:"youtubeIframeApiLoaded",value:function(){return this.f.M&&void 0!=window.P}},{key:"loadYoutubeIframeApi",value:function(){var a=
this;if(!this.Y()){var b,f;(function(){b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(b,f);window.B=function(){a.f.M=!0;a.ua()}})()}}},{key:"onYoutubeIframeApiReady",value:function(){var a=this,b=this.D();this.f.i=new YT.Z("youtube_player",{height:"390",width:"640",Ba:b.T(),na:{onReady:function(a){a.target.W()},onStateChange:function(b){console.log("State: "+b.data);1==b.data?(a.A.X(a.f.i.ra().title,
""),b=a.f.i.pa(),a.j.element.setAttribute("aria-valuemax",b),setInterval(function(){a.o(a.f.i.oa())},500)):console.log("wrong state: "+b.data);console.log("state changed")}}})}},{key:"_updateProgressBar",value:function(a){this.j.Aa(a)}},{key:"_loadFirstSong",value:function(){void 0!=this.a.b&&0!=this.a.b.length&&this.audio.U()&&this.K(this.a.b[0])}},{key:"_addListeners",value:function(){this.$();this.aa();this.ca()}},{key:"_addAudioListeners",value:function(){var a=this;this.audio.element.addEventListener("timeupdate",
function(){0==a.u&&a.o(this.currentTime)});this.audio.element.addEventListener("canplay",function(){a.I();a.ga()});this.audio.element.addEventListener("ended",function(){a.w()})}},{key:"_addControlsListeners",value:function(){var a=this;this.controls.buttons.play.addEventListener("click",function(){a.play()});this.controls.buttons.pause.addEventListener("click",function(){a.pause()});this.controls.buttons.w.addEventListener("click",function(){a.w()});this.controls.buttons.N.addEventListener("click",
function(){a.za()})}},{key:"_addProgressListeners",value:function(){var a=this;this.j.c.addEventListener("mousedown",function(b){b.preventDefault&&b.preventDefault();a.u=!0});this.j.c.addEventListener("mousemove",function(b){if(a.u){var f=a.j.element.getAttribute("aria-valuemax");a.o((b.layerX-this.offsetLeft)/this.offsetWidth*f)}});this.j.c.addEventListener("mouseup",function(b){var f=a.j.element.getAttribute("aria-valuemax");a.audio.element.currentTime=(b.layerX-this.offsetLeft)/this.offsetWidth*
f;a.u=!1})}},{key:"_updateSongInformation",value:function(){var a=this.D();this.A.X(a.title,a.J)}}]);return b}();e.default=g;k.g=e["default"]},function(k,e){Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function c(b,a){for(var f=0;f<a.length;f++){var d=a[f];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),h=function(){function c(){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");this.c=null;this.buttons={play:null,pause:null,w:null,N:null};this.s()}g(c,[{key:"createMarkup",value:function(){var b=document.createElement("div");b.setAttribute("id","ihap_controls_wrapper");b.setAttribute("class","ihap_controls_wrapper");var a=document.createElement("i");a.setAttribute("id","ihap_controls_play_button");a.setAttribute("class","material-icons ihap_controls_play_button");a.innerHTML="play_arrow";var f=document.createElement("i");
f.setAttribute("id","ihap_controls_pause_button");f.setAttribute("class","material-icons ihap_controls_pause_button");f.innerHTML="pause";var d=document.createElement("i");d.setAttribute("id","ihap_controls_next_button");d.setAttribute("class","material-icons ihap_controls_next_button");d.innerHTML="skip_next";var c=document.createElement("i");c.setAttribute("id","ihap_controls_previous_button");c.setAttribute("class","material-icons ihap_controls_previous_button");c.innerHTML="skip_previous";b.appendChild(a);
b.appendChild(f);b.appendChild(c);b.appendChild(d);this.buttons.play=a;this.buttons.pause=f;this.buttons.w=d;this.buttons.N=c;this.c=b}}]);return c}();e.default=h;k.g=e["default"]},function(k,e,g){Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function b(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,f,c){f&&b(a.prototype,f);c&&b(a,c);return a}}(),c=function(b){return b&&
b.G?b:{default:b}}(g(5));g=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.element=this.c=null;this.b=[];this.m=0;this.s();this.F(a)}h(b,[{key:"createMarkup",value:function(){var a=document.createElement("div");a.setAttribute("id","ihap_playlist_wrapper");a.setAttribute("class","ihap_playlist_wrapper");var b=document.createElement("ul");b.setAttribute("id","ihap_playlist");b.setAttribute("class","ihap_playlist");a.appendChild(b);this.c=
a;this.element=b}},{key:"setSongs",value:function(a){this.b=[];if(void 0!=a){a instanceof Array||(a=[a]);for(var b=0;b<a.length;b++)this.b.push(new c.default(a[b]));this.fa(this.b)}}},{key:"removeSongs",value:function(){console.error("removeSongs is not implemented yet")}},{key:"getNextSong",value:function(){if(this.O())var a=this.m+1,a=1<this.b.length&&this.b.length>a?a:0;return this.b[a]}},{key:"getPreviousSong",value:function(){if(this.O())var a=this.m-1,a=1<this.b.length&&0<=a&&this.b.length>
a?a:this.b.length-1;return this.b[a]}},{key:"empty",value:function(){this.F();this.m=-1}},{key:"appendSongs",value:function(a){void 0!=a&&this.F(this.b.concat(a))}},{key:"prependSongs",value:function(a){void 0!=a&&(a instanceof Array||(a=[a]),this.F(a.concat(this.b)))}},{key:"_songsPresent",value:function(){return void 0!=this.b&&this.b!=[]&&0<=this.m}},{key:"_resetPlaylist",value:function(){this.element.innerHTML=""}},{key:"_updatePlaylist",value:function(a){this.ea();a instanceof Array||(a=[a]);
for(var b=0;b<a.length;b++){var c=document.createElement("li");c.appendChild(document.createTextNode(a[b].title));this.element.appendChild(c)}}}]);return b}();e.default=g;k.g=e["default"]},function(k,e){Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function c(b,a){for(var f=0;f<a.length;f++){var c=a[f];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(b,c.key,c)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),
h=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.element=this.c=null;this.s()}g(c,[{key:"createMarkup",value:function(){var b=document.createElement("div");b.setAttribute("id","ihap_progress_bar_wrapper");b.setAttribute("class","ihap_progress_bar_wrapper");var a=document.createElement("div");a.setAttribute("id","ihap_progress_bar");a.setAttribute("class","ihap_progress_bar");a.setAttribute("aria-valuenow","0");a.setAttribute("aria-valuemin",
"0");var c=document.createElement("div");c.setAttribute("id","ihap_progress_bar_background");c.setAttribute("class","ihap_progress_bar_background");c.appendChild(a);b.appendChild(c);this.c=b;this.element=a}},{key:"reset",value:function(b){void 0!=b&&0<b&&(this.element.setAttribute("aria-valuemax",b),this.element.setAttribute("aria-valuenow","0"))}},{key:"updateBar",value:function(b){if(void 0!=b&&0<=b){this.element.setAttribute("aria-valuenow",b);var a=this.element.getAttribute("aria-valuemax");this.element.style.width=
b/parseFloat(a)*100+"%"}}}]);return c}();e.default=h;k.g=e["default"]},function(k,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=function h(c){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.h=document.querySelector(c.h);this.a={enabled:c.a.enabled,C:c.a.C,h:document.querySelector(c.a.h)};this.f={enabled:c.f.enabled,C:c.f.C,h:document.querySelector(c.f.h)}};k.g=e["default"]},function(k,e){Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function c(b,
a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),h=function(){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.title=b.title;this.J=b.J;this.id=b.id;this.url=b.url;this.type=this.B();this.i=null}g(c,[{key:"_getType",value:function(){return this.url.match(/(?:youtube\.com\/\S*(?:(?:\/e(?:mbed))?\/|watch\?(?:\S*?&?v\=))|youtu\.be\/)([a-zA-Z0-9_-]{6,11})/g)?
"youtube_video":"song"}},{key:"getYoutubeId",value:function(){return"youtube_video"==this.type?this.url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i)[1]:!1}}]);return c}();e.default=h;k.g=e["default"]},function(k,e){Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function c(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}
return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),h=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.element=this.c=null;this.s()}g(c,[{key:"createMarkup",value:function(){var b=document.createElement("div");b.setAttribute("id","ihap_song_information_wrapper");b.setAttribute("class","ihap_song_information_wrapper");var a=document.createElement("div");a.setAttribute("id","ihap_song_information_title");a.setAttribute("class",
"ihap_song_information_title");b.appendChild(a);this.element=a;this.c=b}},{key:"emptyMeta",value:function(){this.element.innerHTML=""}},{key:"updateMeta",value:function(b,a){this.c.innerHTML=b+" "+a}},{key:"updateTime",value:function(){}}]);return c}();e.default=h;k.g=e["default"]},function(k,e){Object.defineProperty(e,"__esModule",{value:!0});var g=function(){function c(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,
d.key,d)}}return function(b,a,f){a&&c(b.prototype,a);f&&c(b,f);return b}}(),h=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.element=this.c=null}g(c,[{key:"createMarkup",value:function(){}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"empty",value:function(){}},{key:"isEmpty",value:function(){}},{key:"setSong",value:function(){}}]);return c}();e.default=h;k.g=e["default"]},function(k,e,g){function h(b,a){if("function"!==
typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}Object.defineProperty(e,"__esModule",{value:!0});e.default=void 0;var c=function(){function b(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,
e.key,e)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}();g=function(b){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b;b=Object.getPrototypeOf(a).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.v=!1;b.s();return b}h(a,b);c(a,[{key:"createMarkup",value:function(){var a=document.createElement("div");a.setAttribute("id",
"ihap_player_wrapper");var b=document.createElement("audio");b.setAttribute("id","ihap_player");b.setAttribute("src","");a.appendChild(b);this.c=a;this.element=b}},{key:"play",value:function(){4==this.element.readyState?this.V():this.element.addEventListener("canplay",this.V())}},{key:"onCanPlay",value:function(){this.U()||(this.element.play(),this.v=!0)}},{key:"pause",value:function(){this.element.pause();this.v=!this.element.paused;return this.element.paused}},{key:"empty",value:function(){this.element.currentTime=
0;this.element.setAttribute("src","");this.element.setAttribute("aria-valuemax","0")}},{key:"isEmpty",value:function(){return""==this.element.getAttribute("src")}},{key:"setSong",value:function(a){if(void 0!=a&&void 0!=a.url)this.element.currentTime=0,this.element.setAttribute("src",a.url),this.element.load();else throw Error("Invalid song");}}]);return a}(function(b){return b&&b.G?b:{default:b}}(g(7)).default);e.default=g;k.g=e["default"]}])}
"object"===typeof exports&&"object"===typeof module?module.g=l():"function"===typeof define&&define.ha?define("ihap",[],l):"object"===typeof exports?exports.ihap=l():this.ihap=l();
