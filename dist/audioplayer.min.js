!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("AudioPlayer",[],factory):"object"==typeof exports?exports.AudioPlayer=factory():root.AudioPlayer=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AudioPlayer=function(){function AudioPlayer(data){_classCallCheck(this,AudioPlayer),this.settings=data.settings,this.container=document.getElementById(data.settings.container),this.songs=data.songs,this.current_song_index=null,this.player=null,this.progress_bar=null,this.initializeAudioPlayer()}return _createClass(AudioPlayer,[{key:"initializeAudioPlayer",value:function(){this.createComponents(),void 0!=this.songs&&0!=this.songs.length&&(this.setCurrentSong(this.songs[0]),this.current_song_index=0)}},{key:"createComponents",value:function(){this.createPlayer(),this.createControls(),this.createProgress(),this.addEventListeners()}},{key:"createPlayer",value:function(){var player_wrapper=document.createElement("div");player_wrapper.setAttribute("id","player_wrapper");var audio_player=document.createElement("audio");audio_player.setAttribute("id","player"),audio_player.setAttribute("src",""),player_wrapper.appendChild(audio_player),this.container.appendChild(player_wrapper),this.player=document.getElementById("player")}},{key:"createControls",value:function(){var controls_wrapper=document.createElement("div");controls_wrapper.setAttribute("id","controls_wrapper");var play_button=document.createElement("button"),play_text=document.createTextNode("Play");play_button.appendChild(play_text),play_button.setAttribute("id","play_button");var pause_button=document.createElement("button"),pause_text=document.createTextNode("Pause");pause_button.appendChild(pause_text),pause_button.setAttribute("id","pause_button");var next_button=document.createElement("button"),next_text=document.createTextNode("next");next_button.appendChild(next_text),next_button.setAttribute("id","next_button");var previous_button=document.createElement("button"),previous_text=document.createTextNode("previous");previous_button.appendChild(previous_text),previous_button.setAttribute("id","previous_button"),controls_wrapper.appendChild(play_button),controls_wrapper.appendChild(pause_button),controls_wrapper.appendChild(previous_button),controls_wrapper.appendChild(next_button),this.container.appendChild(controls_wrapper)}},{key:"createProgress",value:function(){this.progress_bar=document.createElement("progress"),this.progress_bar.setAttribute("id","progress_bar"),this.progress_bar.setAttribute("min","0"),this.progress_bar.setAttribute("value","0"),this.container.appendChild(this.progress_bar)}},{key:"addEventListeners",value:function(){var that=this;this.player.addEventListener("timeupdate",function(){that.updateProgress()}),this.player.addEventListener("canplay",function(){that.refreshProgressBar()}),this.player.addEventListener("ended",function(){that.nextSong(!0)}),this.progress_bar.addEventListener("click",function(e){var new_time=(e.pageX-this.offsetLeft)*this.max/this.offsetWidth;that.player.currentTime=new_time}),document.getElementById("play_button").addEventListener("click",function(){that.player.play()}),document.getElementById("pause_button").addEventListener("click",function(){that.player.pause()}),document.getElementById("next_button").addEventListener("click",function(){that.nextSong()}),document.getElementById("previous_button").addEventListener("click",function(){that.previousSong()})}},{key:"setCurrentSong",value:function(song){this.player.setAttribute("src",song),this.player.load()}},{key:"refreshProgressBar",value:function(){this.progress_bar.setAttribute("max",this.player.duration),this.progress_bar.setAttribute("value","0")}},{key:"updateProgress",value:function(){this.progress_bar.setAttribute("value",this.player.currentTime)}},{key:"nextSong",value:function(playing){if(void 0!=this.songs&&this.songs.length>1){var playing=this.player.paused!==!0||playing,new_index=this.current_song_index+1;this.songs.length>new_index?this.current_song_index=new_index:this.current_song_index=0,this.setCurrentSong(this.songs[this.current_song_index]),playing===!0&&this.player.play()}}},{key:"previousSong",value:function(){if(void 0!=this.songs&&this.songs.length>1){var playing=this.player.paused!==!0,new_index=this.current_song_index-1;new_index>=0?this.current_song_index=new_index:this.current_song_index=this.songs.length-1,this.setCurrentSong(this.songs[this.current_song_index]),playing===!0&&this.player.play()}}}]),AudioPlayer}();exports["default"]=AudioPlayer,module.exports=exports["default"]}])});