!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("AudioPlayer",[],factory):"object"==typeof exports?exports.AudioPlayer=factory():root.AudioPlayer=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_progress_bar=__webpack_require__(2),_progress_bar2=_interopRequireDefault(_progress_bar),_audio_element=__webpack_require__(1),_audio_element2=_interopRequireDefault(_audio_element),AudioPlayer=function(){function AudioPlayer(data){_classCallCheck(this,AudioPlayer),this.settings=data.settings,this.container=document.getElementById(data.settings.container),this.songs=data.songs,this.current_song_index=null,this.audio=new _audio_element2["default"](this),this.progress_bar=new _progress_bar2["default"](this),this.play_button=null,this.pause_button=null,this.initializeAudioPlayer()}return _createClass(AudioPlayer,[{key:"initializeAudioPlayer",value:function(){this.createComponents(),void 0!=this.songs&&0!=this.songs.length&&(this.setCurrentSong(this.songs[0]),this.current_song_index=0)}},{key:"createComponents",value:function(){this.createControls(),this.container.appendChild(this.progress_bar.markup),this.addEventListeners()}},{key:"createPlayer",value:function(){var player_wrapper=document.createElement("div");player_wrapper.setAttribute("id","player_wrapper");var audio_player=document.createElement("audio");audio_player.setAttribute("id","player"),audio_player.setAttribute("src",""),player_wrapper.appendChild(audio_player),this.container.appendChild(player_wrapper),this.audio=document.getElementById("player")}},{key:"createControls",value:function(){var controls_wrapper=document.createElement("div");controls_wrapper.setAttribute("id","controls_wrapper"),this.play_button=document.createElement("i"),this.play_button.setAttribute("id","play_button"),this.play_button.setAttribute("class","mat-icon mat-icon-play"),this.pause_button=document.createElement("i"),this.pause_button.setAttribute("id","pause_button"),this.pause_button.setAttribute("class","mat-icon mat-icon-pause");var next_button=document.createElement("i");next_button.setAttribute("id","next_button"),next_button.setAttribute("class","mat-icon mat-icon-skip_next");var previous_button=document.createElement("i");previous_button.setAttribute("id","previous_button"),previous_button.setAttribute("class","mat-icon mat-icon-skip_previous"),controls_wrapper.appendChild(this.play_button),controls_wrapper.appendChild(this.pause_button),controls_wrapper.appendChild(previous_button),controls_wrapper.appendChild(next_button),this.container.appendChild(controls_wrapper)}},{key:"addEventListeners",value:function(){var that=this;this.play_button.addEventListener("click",function(){that.audio.element.play(),this.className+=" disabled",that.pause_button.className="mat-icon mat-icon-pause"}),this.pause_button.addEventListener("click",function(){that.audio.element.pause(),this.className+=" disabled",that.play_button.className="mat-icon mat-icon-play"}),document.getElementById("next_button").addEventListener("click",function(){that.nextSong()}),document.getElementById("previous_button").addEventListener("click",function(){that.previousSong()})}},{key:"setCurrentSong",value:function(song){this.audio.element.setAttribute("src",song.url),this.audio.element.load()}},{key:"refreshProgressBar",value:function(){var song_duration=this.audio.element.duration;this.progress_bar.refresh(song_duration)}},{key:"updateProgress",value:function(){var current_time=this.audio.element.currentTime;this.progress_bar.update(current_time)}},{key:"nextSong",value:function(playing){if(void 0!=this.songs&&this.songs.length>1){var playing=this.audio.paused!==!0||playing,new_index=this.current_song_index+1;this.songs.length>new_index?this.current_song_index=new_index:this.current_song_index=0,this.setCurrentSong(this.songs[this.current_song_index]),playing===!0&&this.audio.play()}}},{key:"previousSong",value:function(){if(void 0!=this.songs&&this.songs.length>1){var playing=this.audio.paused!==!0,new_index=this.current_song_index-1;new_index>=0?this.current_song_index=new_index:this.current_song_index=this.songs.length-1,this.setCurrentSong(this.songs[this.current_song_index]),playing===!0&&this.audio.play()}}}]),AudioPlayer}();exports["default"]=AudioPlayer,module.exports=exports["default"]},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AudioElement=function(){function AudioElement(that){_classCallCheck(this,AudioElement),this.markup=null,this.element=null,this.createMarkup(),this.addListeners(that)}return _createClass(AudioElement,[{key:"createMarkup",value:function(){var player_wrapper=document.createElement("div");player_wrapper.setAttribute("id","player_wrapper");var audio_player=document.createElement("audio");audio_player.setAttribute("id","player"),audio_player.setAttribute("src",""),player_wrapper.appendChild(audio_player),this.markup=player_wrapper,this.element=audio_player}},{key:"addListeners",value:function(that){this.element.addEventListener("timeupdate",function(){that.updateProgress()}),this.element.addEventListener("canplay",function(){that.refreshProgressBar()}),this.element.addEventListener("ended",function(){that.nextSong(!0)})}}]),AudioElement}();exports["default"]=AudioElement,module.exports=exports["default"]},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ProgressBar=function(){function ProgressBar(that){_classCallCheck(this,ProgressBar),this.markup=null,this.element=null,this.createMarkup(),this.addListeners(that)}return _createClass(ProgressBar,[{key:"createMarkup",value:function(){var progress_bar_wrapper=document.createElement("div");progress_bar_wrapper.setAttribute("id","progress_bar_wrapper");var progress_bar=document.createElement("input");progress_bar.setAttribute("id","progress_bar"),progress_bar.setAttribute("min","0"),progress_bar.setAttribute("value","0"),progress_bar.setAttribute("type","range"),progress_bar_wrapper.appendChild(progress_bar),this.markup=progress_bar_wrapper,this.element=progress_bar}},{key:"addListeners",value:function(that){this.element.addEventListener("click",function(e){that.audio.currentTime=this.value})}},{key:"refresh",value:function(song_duration){this.element.setAttribute("max",song_duration),this.element.setAttribute("value","0")}},{key:"update",value:function(current_time){this.element.value=current_time;var value=this.element.value/this.element.max;this.element.style.backgroundImage=["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop("+value+", orange), ","color-stop("+value+", lightgrey)",")"].join("")}}]),ProgressBar}();exports["default"]=ProgressBar,module.exports=exports["default"]}])});